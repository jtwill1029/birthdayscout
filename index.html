<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BirthdayScout â€“ Find Birthday Freebies</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="main.css">

    <!-- Confetti library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti"></script>
</head>

<body>
    <!-- Top nav -->
    <header class="nav">
        <div class="nav-left">
            <div class="logo-mark">ğŸ‚</div>
            <div class="logo-text">
                <span class="logo-title">BirthdayScout</span>
                <span class="logo-subtitle">Freebies, deals & routes</span>
            </div>
        </div>

        <nav class="nav-links">
            <a href="index.html" class="nav-link active">Home</a>
            <a href="deals.html" class="nav-link">Browse deals</a>
            <a href="#" class="nav-link muted">How it works</a>
        </nav>
    </header>

    <!-- Hero section -->
    <main class="page">
        <section class="hero">
            <div class="hero-left">
                <p class="eyebrow">BIRTHDAY PLANNING, UPGRADED.</p>

                <h1>Hit every birthday freebie in one smooth route.</h1>

                <p class="hero-text">
                    BirthdayScout finds birthday deals at restaurants, dessert spots, and activities
                    near you, then helps you plan a route so you donâ€™t miss a single freebie.
                </p>

                <!-- Birthday form -->
                <div class="hero-actions">
                    <form id="birthdayForm" class="birthday-form">
                        <label for="birthdayInput">Whenâ€™s your birthday?</label>
                        <input type="date" id="birthdayInput" required>

                        <button type="submit" class="btn-primary">
                            Find deals for my birthday
                        </button>
                    </form>

                    <!-- Alien error message for impossible birthdays -->
                    <div id="birthdayError" class="birthday-error hidden">
                        <img
                            src="images/alien-confused.png"
                            alt="Confused alien"
                            class="birthday-error-img">
                        <p class="birthday-error-text">
                            Uhhâ€¦ thatâ€™s not a real date. Are you secretly an alien? ğŸ‘½
                        </p>
                    </div>

                    <p class="hero-subtext">
                        We only keep your date in this browser to show deals â€“ no account needed.
                    </p>
                </div>

                <div class="hero-chips">
                    <span class="chip">ğŸ‰ Free desserts</span>
                    <span class="chip">ğŸ Birthday dinners</span>
                    <span class="chip">ğŸ•¹ Activities & fun</span>
                </div>
            </div>

            <!-- Right image -->
            <div class="hero-right">
    <!-- Normal image (default state) -->
    <img src="images/birthday-hero.png"
         alt="Friends celebrating a birthday"
         class="hero-illustration"
         id="heroDefault">

    <!-- Alien image (hidden until error) -->
    <img src="images/alien-confused.png"
         alt="Confused alien looking at a weird birthday date"
         class="hero-illustration hidden"
         id="heroAlien">
</div>

        </section>
    </main>

    <footer class="footer">
        Built by Jaden Â· BirthdayScout â€“ early version for real users & portfolio.
    </footer>

    <!-- Script: validate birthday, save birthday, show confetti, then redirect -->
    <script>
        function launchConfetti() {
            if (typeof confetti !== "function") return;

            // Big center burst
            confetti({
                particleCount: 180,
                spread: 80,
                startVelocity: 45,
                origin: { y: 0.6 }
            });

            // Side bursts
            confetti({
                particleCount: 80,
                angle: 60,
                spread: 60,
                origin: { x: 0, y: 0.7 }
            });

            confetti({
                particleCount: 80,
                angle: 120,
                spread: 60,
                origin: { x: 1, y: 0.7 }
            });
        }

        // Decide if a birthday is "impossible"
        function isImpossibleBirthday(isoValue) {
            if (!isoValue) return true;

            const parts = isoValue.split("-");
            if (parts.length !== 3) return true;

            const year = Number(parts[0]);
            const month = Number(parts[1]);
            const day = Number(parts[2]);

            const date = new Date(year, month - 1, day);
            if (isNaN(date.getTime())) return true;

            const today = new Date();

            // Too far in the past or in the future = alien ğŸ˜ˆ
            if (year < 1900) return true;
            if (date > today) return true;

            return false;
        }

        const birthdayForm = document.getElementById('birthdayForm');
        const birthdayInput = document.getElementById('birthdayInput');
        const birthdayError = document.getElementById('birthdayError');

        if (birthdayInput && birthdayError) {
            // Hide the error as soon as the user fixes the date
            birthdayInput.addEventListener('input', function () {
                if (!isImpossibleBirthday(birthdayInput.value)) {
                    birthdayError.classList.add('hidden');
                }
            });
        }

        if (birthdayForm) {
            birthdayForm.addEventListener('submit', function(event) {
                event.preventDefault();

                if (!birthdayInput) return;

                const value = birthdayInput.value;

                // Check for alien birthdays
                if (isImpossibleBirthday(value)) {
                    if (birthdayError) {
                        birthdayError.classList.remove('hidden');
                    }
                    return; // Don't move on to deals page
                }

                // Valid human birthday: make sure error is hidden
                if (birthdayError) {
                    birthdayError.classList.add('hidden');
                }

                // Save the birthday locally
                localStorage.setItem('birthdayScoutBirthday', value);

                // Fire confetti ğŸ‰
                launchConfetti();

                // Delay so confetti is visible, then go to deals
                setTimeout(() => {
                    window.location.href = 'deals.html';
                }, 1200);
            });
        }
    </script>

</body>
</html>
